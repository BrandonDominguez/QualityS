
<?php

include('db.php');

if (isset($_POST['registro'])) {

  $username = $_POST['name'];
  $lastname = $_POST['lastname'];
  $tel = $_POST['tel'];
  $email = $_POST['email'];
  $password = $_POST['password'];

  $query = "INSERT INTO `usuarios` (`idUsuario`, `nombre`, `apellidos`, `telefono`, `correo`, `contrasena`) VALUES ('NULL', '$username', '$lastname', '$tel', '$email', '$password');";

  $result = mysqli_query($conn, $query);

  if(!$result) {
    die("Query Failed.");
  }
  
}

?>

<!DOCTYPE html>
<html>
    <head>
        <title>Quality S</title>
        <link rel="stylesheet" type="text/css" href="styles.css">

        <script>
            function validateUsername() {
              var username = document.getElementById("username").value;
              var regex = /^[a-zA-Z0-9]{6,12}$/;
              
              if (!regex.test(username)) {
                alert("El usuario debe tener entre 6 y 12 caracteres alfanuméricos.");
                return false;
              }
              
              return true;
            }

            function validatePassword() {
                var password = document.getElementById("password").value;
      
                if (password.length < 8) {
                    alert("La contraseña debe tener al menos 8 caracteres.");
                return false;
                }
      
                return true;
    }
          </script>

    </head>

    <body>

        <header>
            <h1>Quality S</h1>
        </header>

        <div class="login-container">
          <h2>Iniciar Sesión</h2>
          <form onsubmit="return validateUsername() && validatePassword();" action="Upload.html" method="POST">
            <div class="form-group">
              <label for="username">Usuario:</label>
              <input type="text" id="username" name="username" required>
            </div>
            <div class="form-group">
              <label for="password">Contraseña:</label>
              <input type="password" id="password" name="password" required>
            </div>
            <input name="login" type="submit" value="Iniciar">
            
          </form>

            <p>¿No tienes una cuenta? <a href="registro.php">Regístrate aquí</a></p>

        </div>

        

    </body>

 

    <footer>
        
        <p>© 2023 Quality S</p>
            
    </footer>


    
</html>
